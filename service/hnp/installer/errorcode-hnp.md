# Native包管理安装卸载功能错误码

> **说明：**
>
> 以下仅介绍Native包管理模块安装卸载功能特有错误码。


# base公共模块错误码
## 0x801001 命令操作类型非法

**错误信息**

  The cmd operate type is invalid.

**错误描述**

  操作命令非法。

**可能原因**

  传入非法的操作命令就会报这个错误。

**处理步骤**

  检查传入的参数个数是否正确。可通过命令hnpcli help查询正确的参数格式

## 0x801002 缺少必要的操作参数

**错误信息**

  The cmd operate required arg is miss.

**错误描述**

缺少必要的操作参数。

**可能原因**

缺少传入必要的操作参数。

**处理步骤**

检查传入的参数是否正确以及完整。可通过命令hnpcli help查询正确的参数格式

## 0x801101 打开文件失败

**错误信息**

Open file failed.

**错误描述**

打开文件失败会报这个错误。

**可能原因**

1. 文件不存在。
2. 没有权限

**处理步骤**

1. 检查对应的路径下文件是否存在。
2. 检查文件的访问权限，确认本进程是否有权限访问。

## 0x801102 读取文件失败

**错误信息**

Read file content failed.

**错误描述**

读取文件内容失败。

**可能原因**

1. 文件不存在。
2. 没有权限
3. 文件读出的内容大小和期望的大小不相等

**处理步骤**

1. 检查对应的路径下文件是否存在。
2. 检查文件的访问权限，确认本进程是否有权限访问。
3. 查看文件内容以及期望读出的大小，确认哪个是正确的。

## 0x801103 fseek操作失败

**错误信息**

Feek return failed.

**错误描述**

fseek设置失败。

**可能原因**

1. 文件不存在。
2. 没有权限
3. fseek系统报错

**处理步骤**

1. 检查对应的路径下文件是否存在。
2. 检查文件的访问权限，确认本进程是否有权限访问。
3. 查看fssk系统错误码进行定位。

## 0x801104 ftell操作失败

**错误信息**

ftell return failed.

**错误描述**

ftell设置失败。

**可能原因**

1. 文件不存在。
2. 没有权限
3. ftell系统报错

**处理步骤**

1. 检查对应的路径下文件是否存在。
2. 检查文件的访问权限，确认本进程是否有权限访问。
3. 查看ftell系统错误码进行定位。

## 0x801105 获取实际路径失败

**错误信息**

Get real path failed.

**错误描述**

获取实际路径失败。

**可能原因**

路径不存在

**处理步骤**

检查对应的路径下是否存在。

## 0x801106 获取文件大小为0

**错误信息**

Get file content size is 0.

**错误描述**

文件内容为空时会报这个错误。

**可能原因**

文件内容为空

**处理步骤**

检查文件内容是否为空。

## 0x801107 字符串大小超出限制

**错误信息**

The len of string exceed limit.

**错误描述**

字符串大小超出了限制。

**可能原因**

用户传入的字符串超出了限制的大小

**处理步骤**

根据错误信息检查参数是否存在问题

## 0x801108 目录打开失败

**错误信息**

Open Dir failed.

**错误描述**

打开目录失败。

**可能原因**

1. 目录不存在
2. 权限问题

**处理步骤**

1. 检查传入的目录是否存在
2. 检查目录权限是否本进程能够打开

## 0x801109 sprintf拼接失败

**错误信息**

Sprintf failed.

**错误描述**

sprintf拼接失败。

**可能原因**

sprintf接口返回错误

**处理步骤**

查看sprintf错误码并检查参数是否正确

## 0x80110a 生成压缩文件失败

**错误信息**

Create new file in zip failed.

**错误描述**

在zip压缩文件中增加文件失败。

**可能原因**

压缩软件报错

**处理步骤**

查看压缩软件报错原因并修复

## 0x80110b 写文件失败

**错误信息**

Write file failed.

**错误描述**

写入文件内容失败或者写入的字符数和期望的字符数不相等。

**可能原因**

1. 文件不存在
2. 权限问题
3. 写入的是压缩的内容

**处理步骤**

1. 检查传入的文件是否存在
2. 检查文件权限是否本进程能够打开
3. 使用“wb”打开文件再进行写入
## 0x80110c strcpy拷贝失败

**错误信息**

Strcpy failed.

**错误描述**

strcpy拷贝失败。

**可能原因**

strcpy接口返回错误

**处理步骤**

查看strcpy错误码并检查参数是否正确

## 0x80110d 获取文件属性失败

**错误信息**

Get file attr failed.

**错误描述**

获取文件属性信息失败。

**可能原因**

1. 文件不存在
2. 权限问题
3. 系统接口报错

**处理步骤**

1. 检查传入的文件是否存在
2. 检查文件权限是否本进程能够打开
3. 查看具体的系统报错信息并修改


## 0x80110e 解压缩打开文件失败

**错误信息**

Unzip process open file failed.

**错误描述**

解压缩过程中打开文件失败。

**可能原因**

1. 当前打开的文件不是zip格式的文件
2. 文件不存在

**处理步骤**

1. 检查文件是否为zip格式的文件
2. 检查文件是否存在

## 0x80110f 解压缩获取文件信息失败

**错误信息**

Unzip process get file info failed.

**错误描述**

解压缩过程中获取文件信息失败。

**可能原因**

zip里没有文件内容


**处理步骤**

检查zip压缩文件内是否有文件

## 0x801110 解压缩读取文件内容失败

**错误信息**

Unzip process read file failed.

**错误描述**

解压缩过程中读取文件内容失败。

**可能原因**

1. 文件不存在
2. zip压缩文件已损坏


**处理步骤**

1. 检查文件是否存在
2. 使用第三方工具检查zip压缩包是否损坏

## 0x801111 生成软链接失败

**错误信息**

Symlink failed.

**错误描述**

生成软链接失败。

**可能原因**
1. 软链接源文件路径不存在
2. 软链接目标文件路径不存在


**处理步骤**

1. 检查软链接源文件路径是否存在
2. 检查软连接目标文件路径是否存在

## 0x801112 进程正在运行

**错误信息**

Uninstall failed because software is running.

**错误描述**

卸载的软件正在运行中。

**可能原因**

卸载的软件正在运行中，不能卸载

**处理步骤**

检查期望卸载的软件是否正在运行，如果正在运行，则需停止后才能卸载

## 0x801113 入参失败

**错误信息**

Arg check failed.

**错误描述**

参数校验失败。

**可能原因**

入参非法

**处理步骤**

根据报错检查入参是否非法

## 0x801114 strdup失败

**错误信息**

Strdup failed.

**错误描述**

Strdup操作失败。

**可能原因**

申请内存失败

**处理步骤**

根据报错检查内存是否不足


## 0x801115 设置权限失败

**错误信息**

Chmod failed.

**错误描述**

Chmod操作失败。

**可能原因**
1. 权限不足
2. 参数不正确

**处理步骤**

1. 检查当前进程是否有权限执行chmod操作
2. 检查chmod参数是否正确

## 0x801116 删除目录失败

**错误信息**

Remove dir failed.

**错误描述**

删除目录失败。

**可能原因**

权限不足

**处理步骤**

检查当前进程是否有权限执行unlink操作

## 0x801117 对应进程不存在

**错误信息**

Process is not running.

**错误描述**

查询的进程不在运行。

**可能原因**

查询的进程不在运行。

**处理步骤**

检查查询的进程是否正在运行


## 0x801118 创建路径失败

**错误信息**

Mkdir failed.

**错误描述**

mkdir创建目录失败。

**可能原因**

权限不足。

**处理步骤**

检查当前进程是否有权限执行mkdir操作

## 0x801119 读取配置文件流失败

**错误信息**

Read cfg stream failed.

**错误描述**

读取配置文件失败。

**可能原因**

配置文件不存在。

**处理步骤**

检查配置文件是否存在

## 0x80111a 解析json信息失败

**错误信息**

Parse json info failed.

**错误描述**

解析json信息失败。

**可能原因**

字符串内容不是标准的json格式。

**处理步骤**

检查文件内容是否是json格式


## 0x80111b 未找到json项

**错误信息**

Get json item failed.

**错误描述**

未找到json对应的item项。

**可能原因**

查询的字段在json文件中不存在。

**处理步骤**

检查文件内容是否存在对应的item项

## 0x80111c 解析json数组失败

**错误信息**

Get array item failed.

**错误描述**

解析json内容中数组信息失败。

**可能原因**

json文件中不存在对应的数据信息。

**处理步骤**

检查json文件内容是否存在对应的数组信息




# installer模块错误码

## 0x801301 安装命令参数错误

**错误信息**

The cmd arg num is invalid.

**错误描述**

当参数个数检查失败时会返回当前错误。

**可能原因**

传递的有效参数个数小于4个。

**处理步骤**

检查传入的参数个数是否正确。可通过命令hnp help查询正确的参数格式

## 0x801302 组装安装路径失败

**错误信息**

Get install path failed.

**错误描述**

拼接安装路径失败。

**可能原因**

sprintf拼接路径时报错。

**处理步骤**

检查拼接的参数是否超出路径大小上限。根据sprintf报错处理

## 0x801303 获取安装实际路径失败
**错误信息**

Get real path failed.

**错误描述**

根据用户传入的路径获取实际路径失败。

**可能原因**

1. 传入的hnp包所在路径非法
2. 传入的安装路径非法

**处理步骤**

检查安装卸载传入的路径是否正确

## 0x801304 获取Hnp安装包名称失败
**错误信息**

Get hnp file name failed.

**错误描述**

获取不到hnp文件的名字信息

**可能原因**

文件名不是.hnp结尾的名字

**处理步骤**

检查目录下是否存在非.hnp后缀名的文件

## 0x801305 软件已安装
**错误信息**

Software has been installed.

**错误描述**

软件已安装。

**可能原因**

当前当前的软件已安装，可能存在同版本或是其它版本的软件。


**处理步骤**
1. 检查软件是否已被安装
2. 软件已安装，用户确认后可通过-f选项进行强制安装。

## 0x801306 卸载命令参数错误
**错误信息**

The cmd arg num is invalid.

**错误描述**

当参数个数检查失败时会返回当前错误。

**可能原因**

传递的有效参数个数小于4个。

**处理步骤**

检查传入的参数个数是否正确。可通过命令hnp help查询正确的参数格式

## 0x801307 获取卸载路径失败
**错误信息**

Get uninstall path failed。

**错误描述**

获取卸载路径失败。

**可能原因**
1. 传参错误
2. 要卸载的软件不存在。

**处理步骤**
1. 检查卸载的软件信息是否正确
2. 检查卸载的软件是否已安装

## 0x801308 安装命令参数uid错误
**错误信息**

Get user id failed。

**错误描述**

获取用户id错误。

**可能原因**

用户传入的用户ID非数字

**处理步骤**

检查用户传入的用户ID是否非数字

## 0x801309 获取版本目录失败
**错误信息**

Get software version path failed.

**错误描述**

获取安装路径下具体的软件版本路径失败。

**可能原因**

软件安装路径下为空，外层安装路径残留

**处理步骤**

检查安装路径是否残留一个空的.org文件夹。是的话需要删除

## 0x80130a 安装包个数超过阈值
**错误信息**

Num of hnp file over limit.

**错误描述**

安装包的个数超出了限制。阈值为32个

**可能原因**

安装包的个数超出了32个

**处理步骤**

检查安装包的个数是否超出了32个。如果超出需要分批次安装




